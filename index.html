<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basket SÃ¡zky PRO</title>

<style>
* { box-sizing: border-box; }

body {
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,sans-serif;
    background:#0f0f14;
    color:white;
}

.container {
    max-width:600px;
    margin:auto;
    padding:15px;
}

h1 { text-align:center; }

.card {
    background:#1c1c24;
    padding:15px;
    border-radius:18px;
    margin-bottom:20px;
    box-shadow:0 5px 20px rgba(0,0,0,0.4);
}

input, select {
    width:100%;
    padding:10px;
    border-radius:10px;
    border:none;
    margin-bottom:10px;
}

button {
    width:100%;
    padding:10px;
    border-radius:12px;
    border:none;
    font-weight:bold;
    cursor:pointer;
    margin-bottom:8px;
}

.primary { background:#ff9500; color:black; }
.danger { background:#ff3b30; color:white; }
.locked { background:#444 !important; cursor:not-allowed; }

.bet {
    background:#2a2a36;
    padding:10px;
    border-radius:12px;
    margin-top:8px;
    font-size:14px;
}

.bet small { opacity:0.7; }

.modal {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:flex;
    justify-content:center;
    align-items:center;
}

.modal-content {
    background:#1c1c24;
    padding:20px;
    border-radius:18px;
    width:90%;
    max-width:400px;
}
</style>
</head>

<body>
<div class="container">
<h1>ğŸ€ Basket SÃ¡zky PRO</h1>

<div class="card">
<input id="team1" placeholder="TÃ½m 1">
<input id="team2" placeholder="TÃ½m 2">
<button class="primary" onclick="createMatch()">VytvoÅ™it zÃ¡pas</button>
</div>

<div id="matches"></div>
</div>

<div id="modalContainer"></div>

<script>
let matches = JSON.parse(localStorage.getItem("matches")) || [];

function save(){
localStorage.setItem("matches", JSON.stringify(matches));
}

function createMatch(){
if(!team1.value || !team2.value) return;

matches.push({
team1:team1.value,
team2:team2.value,
bets:[]
});

team1.value="";
team2.value="";
save();
render();
}

function showDeleteModal(index){
document.getElementById("modalContainer").innerHTML=`
<div class="modal">
<div class="modal-content">
<h3>Opravdu chceÅ¡ smazat tento zÃ¡pas?</h3>
<button class="danger" onclick="deleteMatch(${index})">Ano, smazat</button>
<button onclick="closeModal()">ZruÅ¡it</button>
</div>
</div>`;
}

function closeModal(){
document.getElementById("modalContainer").innerHTML="";
}

function deleteMatch(index){
matches.splice(index,1);
save();
closeModal();
render();
}

function addBet(i){
let name=document.getElementById("name"+i).value;
let type=document.getElementById("betType"+i).value;
let period=document.getElementById("period"+i).value;

if(!name) return;

let desc="";
let extra=document.getElementById("extra"+i)?.value || "";
let teamSel=document.getElementById("teamSel"+i)?.value || "";

switch(type){
case "winner":
desc=`${teamSel} vyhraje`;
break;
case "margin":
desc=`${teamSel} vyhraje o vÃ­ce neÅ¾ ${extra} bodÅ¯`;
break;
case "points":
desc=`HrÃ¡Ä ${extra} bude mÃ­t vÃ­ce/mÃ©nÄ› bodÅ¯`;
break;
}

matches[i].bets.push({
creator:name,
desc:desc,
period:period,
accepted:null,
locked:false
});

save();
render();
}

function respondBet(matchIndex,betIndex,response){
let bet=matches[matchIndex].bets[betIndex];
if(bet.locked) return;

bet.accepted=response;
bet.locked=true;

save();
render();
}

function render(){
let container=document.getElementById("matches");
container.innerHTML="";

matches.forEach((m,i)=>{
let card=document.createElement("div");
card.className="card";

card.innerHTML=`
<h2>${m.team1} ğŸ†š ${m.team2}</h2>

<input id="name${i}" placeholder="Tvoje jmÃ©no">

<select id="betType${i}">
<option value="winner">ğŸ† VÃ­tÄ›z zÃ¡pasu</option>
<option value="margin">ğŸ“Š VÃ½hra o X bodÅ¯</option>
<option value="points">ğŸ¯ HrÃ¡Ä vÃ­ce/mÃ©nÄ› bodÅ¯</option>
</select>

<select id="teamSel${i}">
<option>${m.team1}</option>
<option>${m.team2}</option>
</select>

<input id="extra${i}" placeholder="Hodnota (napÅ™. 10 nebo ÄÃ­slo hrÃ¡Äe)">

<select id="period${i}">
<option>CelÃ½ zÃ¡pas</option>
<option>1. Ätvrtina</option>
<option>2. Ätvrtina</option>
<option>3. Ätvrtina</option>
<option>4. Ätvrtina</option>
</select>

<button class="primary" onclick="addBet(${i})">VytvoÅ™it sÃ¡zku</button>

${m.bets.map((b,bi)=>`
<div class="bet">
<b>${b.creator}</b>: ${b.desc}<br>
<small>${b.period}</small><br>

${!b.locked ? `
<button onclick="respondBet(${i},${bi},'SouhlasÃ­m')">âœ” SouhlasÃ­m</button>
<button onclick="respondBet(${i},${bi},'NesouhlasÃ­m')">âœ– NesouhlasÃ­m</button>
` : `
<div>ğŸ”’ UzamÄeno (${b.accepted})</div>
`}
</div>
`).join("")}

<button class="danger" onclick="showDeleteModal(${i})">ğŸ—‘ Smazat zÃ¡pas</button>
`;

container.appendChild(card);
});
}

render();
</script>
</body>
</html>
